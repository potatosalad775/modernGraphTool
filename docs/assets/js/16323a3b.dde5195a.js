"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[742],{4083:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>s,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"database-tips/dual-hosting/main-cringraph","title":"Use CrinGraph as main","description":"You can host modernGraphTool and CrinGraph together with slight change of code!","source":"@site/docs/database-tips/dual-hosting/main-cringraph.mdx","sourceDirName":"database-tips/dual-hosting","slug":"/database-tips/dual-hosting/main-cringraph","permalink":"/modernGraphTool/docs/database-tips/dual-hosting/main-cringraph","draft":false,"unlisted":false,"editUrl":"https://github.com/potatosalad775/modernGraphTool/tree/main/docs/docs/database-tips/dual-hosting/main-cringraph.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Use modernGraphTool as main","permalink":"/modernGraphTool/docs/database-tips/dual-hosting/main-mgt"},"next":{"title":"Extensions","permalink":"/modernGraphTool/docs/category/extensions"}}');var a=r(4848),t=r(8453);const s={sidebar_position:2},i="Use CrinGraph as main",d={},l=[{value:"Overview",id:"overview",level:2},{value:"Step-by-Step Guide",id:"step-by-step-guide",level:2},{value:"1. Prepare Your Projects",id:"1-prepare-your-projects",level:3},{value:"2. Organize Your Directory Structure",id:"2-organize-your-directory-structure",level:3},{value:"3. Required Changes to CrinGraph",id:"3-required-changes-to-cringraph",level:3},{value:"graphtool.js",id:"graphtooljs",level:4},{value:"4. Required Changes to modernGraphTool",id:"4-required-changes-to-moderngraphtool",level:3},{value:"config.js",id:"configjs",level:4},{value:"5. Add Navigation Buttons to Each Tool",id:"5-add-navigation-buttons-to-each-tool",level:3},{value:"CrinGraph",id:"cringraph",level:4},{value:"modernGraphTool",id:"moderngraphtool",level:4},{value:"6. Deploying",id:"6-deploying",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"use-cringraph-as-main",children:"Use CrinGraph as main"})}),"\n",(0,a.jsx)(n.p,{children:"You can host modernGraphTool and CrinGraph together with slight change of code!"}),"\n",(0,a.jsx)(n.p,{children:"This chapter showcases how to dual-host 2 graphtools in 1 domain, using CrinGraph as main forefront page."}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(n.p,{children:"There are several ways to host two services on a single domain."}),"\n",(0,a.jsx)(n.p,{children:'Here, we showcase the classic "folder as subdomain" approach, which is simple and effective for static sites or web apps.'}),"\n",(0,a.jsx)(n.h2,{id:"step-by-step-guide",children:"Step-by-Step Guide"}),"\n",(0,a.jsx)(n.h3,{id:"1-prepare-your-projects",children:"1. Prepare Your Projects"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"modernGraphTool"}),": Set up the modernGraphTool database and files as described in the ",(0,a.jsx)(n.a,{href:"../../category/guide-for-admins",children:"other documentation chapters"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"CrinGraph"}),": Prepare the CrinGraph project files. You can use any variant of CrinGraphs."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"2-organize-your-directory-structure",children:"2. Organize Your Directory Structure"}),"\n",(0,a.jsxs)(n.p,{children:["Your root folder should contain the main ",(0,a.jsx)(n.code,{children:"index.html"})," for CrinGraph."]}),"\n",(0,a.jsxs)(n.p,{children:["Create a new folder (e.g., ",(0,a.jsx)(n.code,{children:"mGT"}),") inside the root directory, and place all modernGraphTool files there."]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"mGT"})," folder should also have its own ",(0,a.jsx)(n.code,{children:"index.html"}),"."]}),"\n",(0,a.jsx)(n.admonition,{title:"Tip",type:"tip",children:(0,a.jsxs)(n.p,{children:["CrinGraph was originally designed to contain measurement and target data in the same ",(0,a.jsx)(n.code,{children:"data"})," folder.\nBut, we're going to separate these into a dedicated folder for each of them to make it easier to maintain."]})}),"\n",(0,a.jsx)(n.p,{children:"Example structure:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-plaintext",children:"/project-root/\n\u251c\u2500\u2500 data\n|   \u251c\u2500\u2500 phones          # 'phone' measurements folder\n|   |   \u251c\u2500\u2500 A8 L.txt      # measurement data\n|   |   \u2514\u2500\u2500 A8 R.txt      # measurement data\n|   \u251c\u2500\u2500 target          # 'target' measurements folder\n|   |   \u2514\u2500\u2500 Target.txt    # target data\n|   \u2514\u2500\u2500 phone_book.json # List of phones\n\u251c\u2500\u2500 index.html          # CrinGraph entry point\n\u251c\u2500\u2500 ...other CrinGraph files...\n\u2514\u2500\u2500 mGT\n    \u251c\u2500\u2500 index.html      # modernGraphTool entry point\n    \u2514\u2500\u2500 ...other modernGraphTool files...\n"})}),"\n",(0,a.jsx)(n.h3,{id:"3-required-changes-to-cringraph",children:"3. Required Changes to CrinGraph"}),"\n",(0,a.jsxs)(n.p,{children:["Since we are separating measurement and target data into a dedicated folder, we have to modify ",(0,a.jsx)(n.code,{children:"graphtool.js"})," to properly fetch data from new directories."]}),"\n",(0,a.jsxs)(n.p,{children:["The following examples are based on the ",(0,a.jsx)(n.a,{href:"https://github.com/squiglink/lab",children:"squiglink/labs version"})," of CrinGraph."]}),"\n",(0,a.jsx)(n.admonition,{title:"Tip",type:"tip",children:(0,a.jsx)(n.p,{children:"Even if you are using a different version of CrinGraph, you should be able to follow the examples below without any problems. However, there may be slight differences in details such as line positions."})}),"\n",(0,a.jsx)(n.h4,{id:"graphtooljs",children:"graphtool.js"}),"\n",(0,a.jsxs)(n.p,{children:["Head over to line 787, and edit ",(0,a.jsx)(n.code,{children:"loadFiles"})," function."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'// Previous\nlet l = f => d3.text(DIR+f+".txt").catch(()=>null);\nlet f = p.isTarget ? [l(p.fileName)]\n      : d3.merge(LR.map(s =>\n            sampnums.map(n => l(p.fileName+" "+s+n))));\n\n// After\n// If you\'re using custom directory for measurements, change the \'phones\' and \'target\' words to yours.\nlet l = f => d3.text(DIR+"phones/"+f+".txt").catch(()=>null);\nlet lt = f => d3.text(DIR+"target/"+f+".txt").catch(()=>null);\nlet f = p.isTarget ? [lt(p.fileName)]\n      : d3.merge(LR.map(s =>\n            sampnums.map(n => l(p.fileName+" "+s+n))));\n'})}),"\n",(0,a.jsx)(n.h3,{id:"4-required-changes-to-moderngraphtool",children:"4. Required Changes to modernGraphTool"}),"\n",(0,a.jsxs)(n.p,{children:["Since we don't want to manage 2 data folders for each graphtool respectively, We need to update mGT's ",(0,a.jsx)(n.code,{children:"config.js"})," file to correctly fetch data from parent directory."]}),"\n",(0,a.jsx)(n.h4,{id:"configjs",children:"config.js"}),"\n",(0,a.jsxs)(n.p,{children:["Head over to line 62, and edit ",(0,a.jsx)(n.code,{children:"PATH"})," object."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'// Previous\nPATH: {\n  PHONE_MEASUREMENT: "./data/phones",\n  TARGET_MEASUREMENT: "./data/target",\n  PHONE_BOOK: "./data/phone_book.json",\n},\n\n// After\n// If you\'re using custom directory for measurements, change the \'phones\' and \'target\' words to yours.\nPATH: {\n  PHONE_MEASUREMENT: "../data/phones",\n  TARGET_MEASUREMENT: "../data/target",\n  PHONE_BOOK: "../data/phone_book.json",\n},\n'})}),"\n",(0,a.jsx)(n.p,{children:"Notice that the single dot has been replaced with two dots, indicating mGT to look for a parent directory."}),"\n",(0,a.jsx)(n.h3,{id:"5-add-navigation-buttons-to-each-tool",children:"5. Add Navigation Buttons to Each Tool"}),"\n",(0,a.jsx)(n.p,{children:"After finishing the code-weaving job above, you should be able to access 2 graphtools via these domains."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["To access CrinGraph: ",(0,a.jsx)(n.code,{children:"https://yourdomain.com/"})]}),"\n",(0,a.jsxs)(n.li,{children:["To access modernGraphTool: ",(0,a.jsx)(n.code,{children:"https://yourdomain.com/mGT/"})," (Folder name as subdomain)"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"We can add little buttons so users can easily navigate between these two."}),"\n",(0,a.jsx)(n.h4,{id:"cringraph",children:"CrinGraph"}),"\n",(0,a.jsxs)(n.p,{children:["Head over to line 250 of ",(0,a.jsx)(n.code,{children:"config.js"})," for ",(0,a.jsx)(n.code,{children:"headerLinks"})," array, and add these line:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'headerLinks = [\n  {\n    name: "Go to modernGraphTool",\n    url: "https://yourdomain.com/mGT"\n  },\n  // or\n  {\n    name: "Go to modernGraphTool",\n    url: "./mGT"\n  },\n]\n'})}),"\n",(0,a.jsx)(n.h4,{id:"moderngraphtool",children:"modernGraphTool"}),"\n",(0,a.jsxs)(n.p,{children:["Head over to line 114 of ",(0,a.jsx)(n.code,{children:"config.js"})," for ",(0,a.jsx)(n.code,{children:"TOPBAR"})," object, and add these line:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'TOPBAR: {\n  LINK_LIST: { TITLE: "Go back to CrinGraph", URL: "https://yourdomain.com/" },\n  // or\n  LINK_LIST: { TITLE: "Go back to CrinGraph", URL: "../" },\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"6-deploying",children:"6. Deploying"}),"\n",(0,a.jsx)(n.p,{children:"Upload your project to your web server, ensuring the folder structure is preserved."}),"\n",(0,a.jsx)(n.p,{children:"Both tools should now be accessible as described above."}),"\n",(0,a.jsxs)(n.admonition,{title:"Tip",type:"tip",children:[(0,a.jsxs)(n.p,{children:["If you are applying these changes to your ",(0,a.jsx)(n.code,{children:"squig.link"})," database, the changes might not be shown immediately due to cached files."]}),(0,a.jsxs)(n.p,{children:["You can apply these changes immediately by refreshing the cache. Add ",(0,a.jsx)(n.code,{children:"?cachebust"})," to the end of your database address, then reload the page."]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-plaintext",children:"e.g) https://example.squig.link/?cachebust\n"})})]})]})}function c(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>i});var o=r(6540);const a={},t=o.createContext(a);function s(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);