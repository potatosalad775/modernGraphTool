"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[415],{6848:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>c,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"database-tips/dual-hosting","title":"Dual-Hosting modernGraphTool & CrinGraph","description":"You can host modernGraphTool and CrinGraph together with slight change of code!","source":"@site/docs/database-tips/dual-hosting.mdx","sourceDirName":"database-tips","slug":"/database-tips/dual-hosting","permalink":"/modernGraphTool/docs/database-tips/dual-hosting","draft":false,"unlisted":false,"editUrl":"https://github.com/potatosalad775/modernGraphTool/tree/main/docs/docs/database-tips/dual-hosting.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Database Setup Tips","permalink":"/modernGraphTool/docs/category/database-setup-tips"},"next":{"title":"Extensions","permalink":"/modernGraphTool/docs/category/extensions"}}');var i=o(4848),s=o(8453);const a={sidebar_position:1},t="Dual-Hosting modernGraphTool & CrinGraph",d={},l=[{value:"Overview",id:"overview",level:2},{value:"Step-by-Step Guide",id:"step-by-step-guide",level:2},{value:"1. Prepare Your Projects",id:"1-prepare-your-projects",level:3},{value:"2. Organize Your Directory Structure",id:"2-organize-your-directory-structure",level:3},{value:"3. Required Changes to CrinGraph",id:"3-required-changes-to-cringraph",level:3},{value:"graphtool.js",id:"graphtooljs",level:4},{value:"config.js",id:"configjs",level:4},{value:"4. Adding Navigation Buttons to Each Tool",id:"4-adding-navigation-buttons-to-each-tool",level:3},{value:"modernGraphTool",id:"moderngraphtool",level:4},{value:"CrinGraph",id:"cringraph",level:4},{value:"5. Deploying",id:"5-deploying",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"dual-hosting-moderngraphtool--cringraph",children:"Dual-Hosting modernGraphTool & CrinGraph"})}),"\n",(0,i.jsx)(n.p,{children:"You can host modernGraphTool and CrinGraph together with slight change of code!"}),"\n",(0,i.jsx)(n.p,{children:"This chapter showcases how to dual-host 2 graphtools in 1 domain."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"There are several ways to host two services on a single domain."}),"\n",(0,i.jsx)(n.p,{children:'Here, we showcase the classic "folder as subdomain" approach, which is simple and effective for static sites or web apps.'}),"\n",(0,i.jsx)(n.h2,{id:"step-by-step-guide",children:"Step-by-Step Guide"}),"\n",(0,i.jsx)(n.h3,{id:"1-prepare-your-projects",children:"1. Prepare Your Projects"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"modernGraphTool"}),": Set up the modernGraphTool database and files as described in the ",(0,i.jsx)(n.a,{href:"../category/guide-for-admins",children:"other documentation chapters"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CrinGraph"}),": Prepare the CrinGraph project files. You can use any variant of CrinGraphs."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-organize-your-directory-structure",children:"2. Organize Your Directory Structure"}),"\n",(0,i.jsxs)(n.p,{children:["Your root folder should contain the main ",(0,i.jsx)(n.code,{children:"index.html"})," for modernGraphTool."]}),"\n",(0,i.jsxs)(n.p,{children:["Create a new folder (e.g., ",(0,i.jsx)(n.code,{children:"cringraph/"}),") inside the root directory, and place all CrinGraph files there."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"cringraph/"})," folder should also have its own ",(0,i.jsx)(n.code,{children:"index.html"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Example structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",children:"/project-root/\n\u251c\u2500\u2500 data\n|   \u251c\u2500\u2500 phones          # 'phone' measurements folder\n|   \u251c\u2500\u2500 target          # 'target' measurements folder\n|   \u2514\u2500\u2500 phone_book.json # List of phones\n\u251c\u2500\u2500 index.html          # modernGraphTool entry point\n\u251c\u2500\u2500 ...other modernGraphTool files...\n\u2514\u2500\u2500 cringraph/\n    \u251c\u2500\u2500 index.html      # CrinGraph entry point\n    \u2514\u2500\u2500 ...other CrinGraph files...\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-required-changes-to-cringraph",children:"3. Required Changes to CrinGraph"}),"\n",(0,i.jsx)(n.p,{children:"Since we don't want to manage 2 data folders for each graphtool respectively, We need to update CrinGraph's code to correctly fetch data from parent directory."}),"\n",(0,i.jsx)(n.p,{children:"Required changes will be made in two files:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"graphtool.js"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"config.js"})," (and ",(0,i.jsx)(n.code,{children:"config_hp.js"})," if you have one)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The following examples are based on the ",(0,i.jsx)(n.a,{href:"https://github.com/squiglink/lab",children:"squiglink/labs version"})," of CrinGraph."]}),"\n",(0,i.jsx)(n.admonition,{title:"Tip",type:"tip",children:(0,i.jsx)(n.p,{children:"Even if you are using a different version of CrinGraph, you should be able to follow the examples below without any problems. However, there may be slight differences in details such as line positions."})}),"\n",(0,i.jsx)(n.h4,{id:"graphtooljs",children:"graphtool.js"}),"\n",(0,i.jsxs)(n.p,{children:["Head over to line 787, and edit ",(0,i.jsx)(n.code,{children:"loadFiles"})," function."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'// Previous\nlet l = f => d3.text(DIR+f+".txt").catch(()=>null);\nlet f = p.isTarget ? [l(p.fileName)]\n      : d3.merge(LR.map(s =>\n            sampnums.map(n => l(p.fileName+" "+s+n))));\n\n// After\n// If you\'re using custom directory for measurements, change the \'phones\' and \'target\' words to yours.\nlet l = f => d3.text(DIR+"phones/"+f+".txt").catch(()=>null);\nlet lt = f => d3.text(DIR+"target/"+f+".txt").catch(()=>null);\nlet f = p.isTarget ? [lt(p.fileName)]\n      : d3.merge(LR.map(s =>\n            sampnums.map(n => l(p.fileName+" "+s+n))));\n'})}),"\n",(0,i.jsx)(n.h4,{id:"configjs",children:"config.js"}),"\n",(0,i.jsxs)(n.p,{children:["Head over to line 3, and edit ",(0,i.jsx)(n.code,{children:"DIR"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// Previous\nDIR = \"data/\",\n\n// After\n// '../' means 'parent directory'.\nDIR = \"../data/\", \n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you're using Haruto's iteration of CrinGraph (",(0,i.jsx)(n.a,{href:"https://github.com/HarutoHiroki/PublicGraphTool",children:"PublicGraphTool"})," / ",(0,i.jsx)(n.a,{href:"https://github.com/potatosalad775/ExtendedGraphTool",children:"ExtendedGraphTool"}),"),\nYou should change this line too :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'// Previous at Line 55\nPHONE_BOOK = "phone_book.json", // Path to phone book JSON file\n\n// After\nPHONE_BOOK = "../data/phone_book.json", // Path to phone book JSON file\n'})}),"\n",(0,i.jsx)(n.h3,{id:"4-adding-navigation-buttons-to-each-tool",children:"4. Adding Navigation Buttons to Each Tool"}),"\n",(0,i.jsx)(n.p,{children:"After finishing the code-weaving job above, you should be able to access 2 graphtools via these domains."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["To access modernGraphTool: ",(0,i.jsx)(n.code,{children:"https://yourdomain.com/"})]}),"\n",(0,i.jsxs)(n.li,{children:["To access CrinGraph: ",(0,i.jsx)(n.code,{children:"https://yourdomain.com/cringraph/"})," (Folder name as subdomain)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"We can add little buttons so users can easily navigate between these two."}),"\n",(0,i.jsx)(n.h4,{id:"moderngraphtool",children:"modernGraphTool"}),"\n",(0,i.jsxs)(n.p,{children:["Head over to ",(0,i.jsx)(n.code,{children:"config.js"})," and add these line:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'TOPBAR: {\n  LINK_LIST: { TITLE: "Go to CrinGraph", URL: "https://yourdomain.com/cringraph" },\n  // or\n  LINK_LIST: { TITLE: "Go to CrinGraph", URL: "./cringraph" },\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"cringraph",children:"CrinGraph"}),"\n",(0,i.jsxs)(n.p,{children:["Head over to ",(0,i.jsx)(n.code,{children:"config.js"})," and add these line:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'headerLinks = [\n  {\n    name: "Head back to modernGraphTool",\n    url: "https://yourdomain.com/"\n  },\n  // or\n  {\n    name: "Head back to modernGraphTool",\n    url: "../"\n  },\n]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"5-deploying",children:"5. Deploying"}),"\n",(0,i.jsx)(n.p,{children:"Upload your project to your web server, ensuring the folder structure is preserved."}),"\n",(0,i.jsx)(n.p,{children:"Both tools should now be accessible as described above."})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>t});var r=o(6540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);